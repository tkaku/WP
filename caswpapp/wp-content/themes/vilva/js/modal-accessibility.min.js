var vilva=vilva||{};vilva.createEvent=function(eventName){var event;if(typeof window.Event==='function'){event=new Event(eventName)}else{event=document.createEvent('Event');event.initEvent(eventName,!0,!1)}
return event};vilva.coverModals={init:function(){if(document.querySelector('.cover-modal')){this.onToggle();this.closeOnEscape();this.hideAndShowModals();this.keepFocusInModal()}},onToggle:function(){document.querySelectorAll('.cover-modal').forEach(function(element){element.addEventListener('toggled',function(event){var modal=event.target,body=document.body;if(modal.classList.contains('active')){body.classList.add('showing-modal')}else{body.classList.remove('showing-modal');body.classList.add('hiding-modal');setTimeout(function(){body.classList.remove('hiding-modal')},500)}})})},closeOnEscape:function(){document.addEventListener('keydown',function(event){if(event.keyCode===27){event.preventDefault();document.querySelectorAll('.cover-modal.active').forEach(function(element){this.untoggleModal(element)}.bind(this))}}.bind(this))},hideAndShowModals:function(){var _doc=document,_win=window,modals=_doc.querySelectorAll('.cover-modal'),htmlStyle=_doc.documentElement.style,adminBar=_doc.querySelector('#wpadminbar');function getAdminBarHeight(negativeValue){var height,currentScroll=_win.pageYOffset;if(adminBar){height=currentScroll+adminBar.getBoundingClientRect().height;return negativeValue?-height:height}
return currentScroll===0?0:-currentScroll}
function htmlStyles(){var overflow=_win.innerHeight>_doc.documentElement.getBoundingClientRect().height;return{'overflow-y':overflow?'hidden':'scroll',position:'fixed',width:'100%',top:getAdminBarHeight(!0)+'px',left:0}}
modals.forEach(function(modal){modal.addEventListener('toggle-target-before-inactive',function(event){var styles=htmlStyles(),offsetY=_win.pageYOffset,paddingTop=(Math.abs(getAdminBarHeight())-offsetY)+'px',mQuery=_win.matchMedia('(max-width: 600px)');if(event.target!==modal){return}
Object.keys(styles).forEach(function(styleKey){htmlStyle.setProperty(styleKey,styles[styleKey])});_win.vilva.scrolled=parseInt(styles.top,10);if(adminBar){_doc.body.style.setProperty('padding-top',paddingTop);if(mQuery.matches){if(offsetY>=getAdminBarHeight()){modal.style.setProperty('top',0)}else{modal.style.setProperty('top',(getAdminBarHeight()-offsetY)+'px')}}}
modal.classList.add('show-modal')});modal.addEventListener('toggle-target-after-inactive',function(event){if(event.target!==modal){return}
setTimeout(function(){var clickedEl=vilva.toggles.clickedEl;modal.classList.remove('show-modal');Object.keys(htmlStyles()).forEach(function(styleKey){htmlStyle.removeProperty(styleKey)});if(adminBar){_doc.body.style.removeProperty('padding-top');modal.style.removeProperty('top')}
if(clickedEl!==!1){clickedEl.focus();clickedEl=!1}
_win.scrollTo(0,Math.abs(_win.vilva.scrolled+getAdminBarHeight()));_win.vilva.scrolled=0},500)})})},untoggleModal:function(modal){var modalTargetClass,modalToggle=!1;if(modal.dataset.modalTargetString){modalTargetClass=modal.dataset.modalTargetString;modalToggle=document.querySelector('*[data-toggle-target="'+modalTargetClass+'"]')}
if(modalToggle){modalToggle.click()}else{modal.classList.remove('active')}},keepFocusInModal:function(){var _doc=document;_doc.addEventListener('keydown',function(event){var toggleTarget,modal,selectors,elements,menuType,bottomMenu,activeEl,lastEl,firstEl,tabKey,shiftKey,clickedEl=vilva.toggles.clickedEl;if(clickedEl&&_doc.body.classList.contains('showing-modal')){toggleTarget=clickedEl.dataset.toggleTarget;selectors='input, a, button';modal=_doc.querySelector(toggleTarget);elements=modal.querySelectorAll(selectors);elements=Array.prototype.slice.call(elements);if('.menu-modal'===toggleTarget){menuType=window.matchMedia('(min-width: 1025px)').matches;menuType=menuType?'.expanded-menu':'.mobile-menu';elements=elements.filter(function(element){return null!==element.closest(menuType)&&null!==element.offsetParent});elements.unshift(_doc.querySelector('.close-nav-toggle'));bottomMenu=_doc.querySelector('.menu-bottom > nav');if(bottomMenu){bottomMenu.querySelectorAll(selectors).forEach(function(element){elements.push(element)})}}
if('.main-menu-modal'===toggleTarget){menuType=window.matchMedia('(min-width: 1025px)').matches;menuType=menuType?'.expanded-menu':'.mobile-menu';elements=elements.filter(function(element){return null!==element.closest(menuType)&&null!==element.offsetParent});elements.unshift(_doc.querySelector('.close-main-nav-toggle'));bottomMenu=_doc.querySelector('.menu-bottom > nav');if(bottomMenu){bottomMenu.querySelectorAll(selectors).forEach(function(element){elements.push(element)})}}
lastEl=elements[elements.length-1];firstEl=elements[0];activeEl=_doc.activeElement;tabKey=event.keyCode===9;shiftKey=event.shiftKey;if(!shiftKey&&tabKey&&lastEl===activeEl){event.preventDefault();firstEl.focus()}
if(shiftKey&&tabKey&&firstEl===activeEl){event.preventDefault();lastEl.focus()}}})}};vilva.modalMenu={init:function(){this.expandLevel()},expandLevel:function(){var modalMenus=document.querySelectorAll('.modal-menu');modalMenus.forEach(function(modalMenu){var activeMenuItem=modalMenu.querySelector('.current-menu-item');if(activeMenuItem){vilvaFindParents(activeMenuItem,'li').forEach(function(element){var subMenuToggle=element.querySelector('.submenu-toggle');if(subMenuToggle){vilva.toggles.performToggle(subMenuToggle,!0)}})}})},};vilva.toggles={clickedEl:!1,init:function(){this.toggle()},performToggle:function(element,instantly){var target,timeOutTime,classToToggle,self=this,_doc=document,toggle=element,targetString=toggle.dataset.toggleTarget,activeClass='active';if(!_doc.querySelectorAll('.show-modal').length){self.clickedEl=_doc.activeElement}
if(targetString==='next'){target=toggle.nextSibling}else{target=_doc.querySelector(targetString)}
if(target.classList.contains(activeClass)){target.dispatchEvent(vilva.createEvent('toggle-target-before-active'))}else{target.dispatchEvent(vilva.createEvent('toggle-target-before-inactive'))}
classToToggle=toggle.dataset.classToToggle?toggle.dataset.classToToggle:activeClass;timeOutTime=0;if(target.classList.contains('cover-modal')){timeOutTime=10}
setTimeout(function(){var focusElement,subMenued=target.classList.contains('sub-menu'),newTarget=subMenued?toggle.closest('.menu-item').querySelector('.sub-menu'):target,duration=toggle.dataset.toggleDuration;if(toggle.dataset.toggleType==='slidetoggle'&&!instantly&&duration!=='0'){vilvaMenuToggle(newTarget,duration)}else{newTarget.classList.toggle(classToToggle)}
if(targetString==='next'){toggle.classList.toggle(activeClass)}else if(target.classList.contains('sub-menu')){toggle.classList.toggle(activeClass)}else{_doc.querySelector('*[data-toggle-target="'+targetString+'"]').classList.toggle(activeClass)}
vilvaToggleAttribute(toggle,'aria-expanded','true','false');if(self.clickedEl&&-1!==toggle.getAttribute('class').indexOf('close-')){vilvaToggleAttribute(self.clickedEl,'aria-expanded','true','false')}
if(toggle.dataset.toggleBodyClass){_doc.body.classList.toggle(toggle.dataset.toggleBodyClass)}
if(toggle.dataset.setFocus){focusElement=_doc.querySelector(toggle.dataset.setFocus);if(focusElement){if(target.classList.contains(activeClass)){focusElement.focus()}else{focusElement.blur()}}}
target.dispatchEvent(vilva.createEvent('toggled'));if(target.classList.contains(activeClass)){target.dispatchEvent(vilva.createEvent('toggle-target-after-active'))}else{target.dispatchEvent(vilva.createEvent('toggle-target-after-inactive'))}},timeOutTime)},toggle:function(){var self=this;document.querySelectorAll('*[data-toggle-target]').forEach(function(element){element.addEventListener('click',function(event){event.preventDefault();self.performToggle(element)})})},};function vilvaDomReady(fn){if(typeof fn!=='function'){return}
if(document.readyState==='interactive'||document.readyState==='complete'){return fn()}
document.addEventListener('DOMContentLoaded',fn,!1)}
vilvaDomReady(function(){vilva.toggles.init();vilva.coverModals.init()});function vilvaToggleAttribute(element,attribute,trueVal,falseVal){if(trueVal===undefined){trueVal=!0}
if(falseVal===undefined){falseVal=!1}
if(element.getAttribute(attribute)!==trueVal){element.setAttribute(attribute,trueVal)}else{element.setAttribute(attribute,falseVal)}}
function vilvaFindParents(target,query){var parents=[];function traverse(item){var parent=item.parentNode;if(parent instanceof HTMLElement){if(parent.matches(query)){parents.push(parent)}
traverse(parent)}}
traverse(target);return parents}